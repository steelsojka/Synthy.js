/**
 * Synthy.Filter.min.js v0.2.0
 *
 * A polyphonic customizable synthesizer
 * @author Steven Sojka - Monday, February 18, 2013
 *
 * MIT Licensed
 */
var Synthy=function(d){d.Filter=function(a,b,c){this.context=c;this.filter=c.createBiquadFilter();this.filter.frequency.value=a.cutoff;this.filter.Q.value=a.q;this.filter.type=a.type;this.freq=d.Util.noteToFreq(b);this.env=a.envelope;this.patch=a;this.input=this.output=this.filter};d.Filter.prototype={trigger:function(a){var b=this.patch,a=a||this.context.currentTime,c=this.filter.frequency;this.startLevel=this.frequencyFromCutoff(b.cutoff/100);this.attackLevel=this.frequencyFromCutoff(b.cutoff/100+
this.env/120);this.sustainLevel=this.frequencyFromCutoff(b.cutoff/100+this.env/120*(b.sustain/100));this.attackEnd=a+b.attack/20;c.value=this.startLevel;c.setValueAtTime(this.startLevel,a);c.linearRampToValueAtTime(this.attackLevel,this.attackEnd);c.setTargetValueAtTime(this.sustainLevel,this.attackEnd,b.decay/100)},frequencyFromCutoff:function(a){var b=0.5*this.context.sampleRate,a=Math.pow(2,9*a-1)*this.freq;a>b&&(a=b);return a},release:function(a){var a=a||this.context.currentTime,b=this.filter.frequency;
b.cancelScheduledValues(a);b.setValueAtTime(b.value,a);b.linearRampToValueAtTime(this.startLevel,a+this.patch.release/100)}};return d}(Synthy||{});
