/**
 * Synthy.Drive.min.js v0.1.1
 *
 * A polyphonic customizable synthesizer
 * @author Steven Sojka - Friday, February 15, 2013
 *
 * MIT Licensed
 */
var Synthy=function(h){var j=function(a){return(Math.exp(a)-Math.exp(-a))/(Math.exp(a)+Math.exp(-a))},i=[function(a,c,e){var a=Math.min(a,0.9999),a=2*a/(1-a),b,d;for(b=0;b<c;b++)d=2*b/c-1,e[b]=(1+a)*d/(1+a*Math.abs(d))},function(a,c,e){for(var b,d,a=0;a<c;a++)b=2*a/c-1,d=0<=(0.5*Math.pow(b+1.4,2)-1)*d?5.8:1.2,e[a]=j(d)},function(a,c,e){for(var b,d=1-a,a=0;a<c;a++)b=2*a/c-1,b=0>b?-Math.pow(Math.abs(b),d+0.04):Math.pow(b,d),e[a]=j(2*b)},function(a,c,e){for(var b,d,f,g=0.99<1-a?0.99:1-a,a=0;a<c;a++){b=
2*a/c-1;f=Math.abs(b);f<g?d=f:f>g?d=g+(f-g)/(1+Math.pow((f-g)/(1-g),2)):1<f&&(d=f);f=e;var h=a;b=0===b?1:Math.abs(b)/b;f[h]=b*d*(1/((g+1)/2))}},function(a,c,e){for(var b,a=0;a<c;a++)b=2*a/c-1,e[a]=-0.08905>b?-0.75*(1-Math.pow(1-(Math.abs(b)-0.032857),12)+1/3*(Math.abs(b)-0.032847))+0.01:-0.08905<=b&&0.320018>b?-6.153*b*b+3.9375*b:0.630035},function(a,c,e){var a=2+Math.round(14*a),a=Math.round(Math.pow(2,a-1)),b,d;for(b=0;b<c;b++)d=2*b/c-1,e[b]=Math.round(d*a)/a}];h.Drive=function(a,c){this.context=
c;this.drive=c.createWaveShaper();this.input=c.createGainNode();this.output=c.createGainNode();this.driveOutput=c.createGainNode();this.dryOutput=c.createGainNode();this.waveTable=new Float32Array(c.sampleRate);this.input.connect(this.drive);this.input.connect(this.dryOutput);this.dryOutput.connect(this.output);this.drive.connect(this.driveOutput);this.driveOutput.connect(this.output);this.setMix(a.mix);this.setType(a.type);this.setAmount(a.drive)};h.Drive.prototype={setAmount:function(a){this.amount=
a;i[this.type](a,this.context.sampleRate,this.waveTable);this.drive.curve=this.waveTable},setType:function(a){a>i.length-1||0>a||(this.type=a,i[this.type](this.amount,this.context.sampleRate,this.waveTable))},setMix:function(a){1<a&&(a=1);this.dryOutput.gain.value=1-a;this.driveOutput.gain.value=a},getValues:function(){return{drive:this.amount,mix:this.driveOutput.gain.value}}};return h}(Synthy||{});
