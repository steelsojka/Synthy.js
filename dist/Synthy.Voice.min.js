/**
 * Synthy.Voice.min.js v0.1.1
 *
 * A polyphonic customizable synthesizer
 * @author Steven Sojka - Friday, February 15, 2013
 *
 * MIT Licensed
 */
var Synthy=function(){Synthy.Voice=function(a,b,c){var e=a.noteNumber,a=a.velocity||127;this.osc=[];this.driveFx=[];this.envelope=new Synthy.Envelope(b.envelope,c);this.filter=new Synthy.Filter(b.filter,e,c);for(var d=0,f=b.osc.length;d<f;d++)this.osc.push(new Synthy.Osc(b.osc[d],e,a,c)),this.driveFx.push(new Synthy.Drive({drive:b.osc[d].driveAmount,mix:b.osc[d].driveMix,type:b.osc[d].driveType},c)),this.osc[d].output.connect(this.driveFx[d].input),this.driveFx[d].output.connect(this.filter.input);
this.filter.output.connect(this.envelope.input);this.output=this.envelope.input};Synthy.Voice.prototype={trigger:function(a){null==a&&(a=0);for(var b=0,c=this.osc.length;b<c;b++)this.osc[b].trigger(a);this.filter.trigger(a);this.envelope.trigger(a)},release:function(a){var b=this.envelope.getReleaseTime(),c=a||0;this.envelope.release(a);this.filter.release(a);for(var a=0,e=this.osc.length;a<e;a++)this.osc[a].release(c+b);this.timeout=setTimeout(this.destroy.bind(this),1E3*(c+b))},destroy:function(){this.output.disconnect(0)},
kill:function(){clearTimeout(this.timeout);for(var a=0,b=this.osc.length;a<b;a++)this.osc[a].kill()}};return Synthy}(Synthy||{});
